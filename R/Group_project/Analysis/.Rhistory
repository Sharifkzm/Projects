```{r setup, include=FALSE}
knitr::opts_chunk$set(cache=TRUE,
message=FALSE, warning=FALSE, echo=FALSE,
fig.path='figs/',
cache.path = '_cache/',
fig.process = function(x) {
x2 = sub('-\\d+([.][a-z]+)$', '\\1', x)
if (file.rename(x, x2)) x2 else x
})
library(tidyverse)
library(stargazer)
library(kableExtra)
library(readxl)
library(gapminder)
library(dplyr)
library(purrr)
library(ggplot2)
library(tidyr)
library(reshape2)
library(panelr)
library(lmtest)
library(sandwich)
library(knitr)
library(modelsummary)
library(fixest)
library(magrittr)
library(stringr)
library(feasts)
library(weights)
load("Final Dataset.RData")
korea_1 <- st_read(dsn = 'Data/Mapping/gadm41_KOR_1.shp')
library(tidyverse)
library(readxl)
library(openxlsx)
library(data.table)
library(gapminder)
library(dplyr)
library(purrr)
library(tidyr)
library(gapminder)
library(panelr)
library(plm)
library(fixest)
library(lmtest)
library(multiwayvcov)
library(broom)
library(stargazer)
library(modelsummary)
library(sf)
library(ggplot2)
library(tmap)
install.packages(tmap)
library(tmap)
library(sf)
korea_1 <- st_read(dsn = 'Data/Mapping/gadm41_KOR_1.shp')
korea_1_df <- korea_1
korea_1_df[c('Province_raw', 'Province_hyphen')] <- str_split_fixed(korea_1_df$NAME_1, '-', 2)
lookup_table <- data.frame(
old_province = c("Chungcheongbuk", "Chungcheongnam","Gyeongsangbuk",
"Gyeongsangnam","Jeollabuk","Jeollanam"),
new_province = c("North Chungcheong", "South Chungcheong",
"North Gyeongsang","South Gyeongsang",
"North Jeolla","South Jeolla")
)
korea_1_df <- korea_1_df %>%
mutate(
province = case_when(
Province_raw %in% lookup_table$old_province ~ lookup_table$new_province[match(Province_raw, lookup_table$old_province)],
TRUE ~ Province_raw
)
)
capital_provinces <- c("Seoul", "Incheon", "Gyeonggi")
korea_1_df <- korea_1_df %>%
mutate(Capital = ifelse(province %in% capital_provinces, "Capital", "Non-capital"))
## Testing the plotting and saving ####
g2 <- ggplot(data = korea_1_df) +
geom_sf(aes(fill = Capital)) +
theme_bw() +
ggtitle("Korea Provinces")
g2
save(korea_1_df, file = "Korea_map.RData")
library(tmap)
